#!/bin/bash
#SBATCH --partition=gpu_a100
#SBATCH --gpus=1
#SBATCH --cpus-per-task=4
#SBATCH --job-name=fix_numpy_conflict
#SBATCH --output=fix_numpy_conflict_%A.out
#SBATCH --time=1:00:00
#SBATCH --mem=8G

echo "ğŸ”§ Fixing numpy version conflict..."

# Load conda and activate environment
module load Anaconda3/2023.07-2
source activate devinterp_env

echo "ğŸ” Current numpy versions:"
python -c "import numpy; print(f'NumPy version: {numpy.__version__}')"
python -c "import numpy; print(f'NumPy location: {numpy.__file__}')"

echo "ğŸ”§ Reinstalling numpy in conda environment..."
conda install numpy=2.2.6 -y

echo "ğŸ”§ Testing FFCV import..."
python -c "import ffcv; print('âœ… FFCV imported successfully')"

echo "âœ… Numpy conflict fixed!" 